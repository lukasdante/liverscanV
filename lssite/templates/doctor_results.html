{% extends 'main/main.html' %}
{% load static %}
{% block content %}
<div class="assigned-reports">
    <div class="assigned-reports-left-panel">
        <div class="search-container">
            <input type="text" placeholder="Search" class="search-input" id="search-input">
            <img src="{% static 'img/search.svg' %}" alt="Search" class="search-icon">
        </div>
    
        <div class="assigned-reports-card-container">
            {% for diagnosis in diagnoses %}
            <div class="assigned-reports-card" data-target="{{ diagnosis.id }}" onclick="fetchDiagnosisDetails('{{ diagnosis.id }}')">
                <div class="assigned-reports-card-content">
                    <h2 style="display: flex; align-items: center; ">
                        {% if diagnosis.status == 1  %}
                        <svg  style="margin: 0px 5px 0px 5px;" width="10" height="10">
                            <circle cx="5" cy="5" r="5" fill="red" />
                        </svg>
                        {% endif %}
                        {% if diagnosis.status == 2  %}
                        <svg  style="margin: 0px 5px 0px 5px;" width="10" height="10">
                            <circle cx="5" cy="5" r="5" fill="green" />
                        </svg>
                        {% endif %}
                        {{ diagnosis.patient_id }}</h2>
                    <p>{{ diagnosis.initial_diagnosis }} | {{ diagnosis.confidence }} | {{ diagnosis.area }} cm&sup2;</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="assigned-reports-right-panel" id="assigned-reports-right-panel">
        <div class="assigned-reports-report-details">
            <div class="form-selected" style="display: none;"><h1>Report Details</h1></div>
            <div class="no-form-selected" style="display: block;"><h1>No patient selected.</h1></div>
            <div id="report-details-content">
            </div>
        </div>
        <div class="doctor-results-main" style="display: none;">
            <div class="doctor-results-body"> 
                <div class="doctor-results-title">Results</div>
                <div class="results-images">
                    <div class="results-image-block">
                        <div class="results-image">
                            <img class="results-image-image" src="{% static 'img/ct_sample.png' %}" alt="unenhanced">
                        </div>
                        <div class="results-text">unenhanced</div>
                    </div>
                    <div class="results-image-block">
                        <div class="results-image">
                            <img class="results-image-image" src="{% static 'img/ct_sample.png' %}" alt="arterial">
                        </div>
                        <div class="results-text">arterial</div>
                    </div>
                    <div class="results-image-block">
                        <div class="results-image">
                            <img class="results-image-image" src="{% static 'img/ct_sample.png' %}" alt="portal venous">
                        </div>
                        <div class="results-text">portal venous</div>
                    </div>
                </div>
                <div class="results-details">
                    <div class="results-details-title">Confirm Details</div>
                    <hr>
                    <div class="results-details-block">
                        <form method="post">
                            {% csrf_token %}
                            <div class="results-details-item">
                                <div class="results-details-item-name ">Patient ID:</div>
                                <div class="results-details-item-value patient-id-value"></div>
                            </div>
                            <div class="results-details-item">
                                <div class="results-details-item-name">Status:</div>
                                <div class="results-details-item-value status-value"></div>
                            </div>
                            <div class="results-details-item">
                                <div class="results-details-item-name">Initial Diagnosis:</div>
                                <div class="results-details-item-value diagnosis-value"></div>
                            </div>
                            
                            <div class="results-details-item">
                                <div class="results-details-item-name">Date of Diagnosis:</div>
                                <div class="results-details-item-value date-value"></div>
                            </div>
                            <div class="results-details-item">
                                <div class="results-details-item-name">Area of Diagnosis:</div>
                                <div class="results-details-item-value area-value">cm&sup2;</div>
                            </div>
                            <div class="results-details-item">
                                <div class="results-details-item-name">Final Diagnosis:</div>
                                <select id="status" name="final_diagnosis">
                                    <option value="normal">normal</option>
                                    <option value="abscess">abscess</option>
                                    <option value="cyst">cyst</option>
                                    <option value="tumor">tumor</option>
                                </select>
                            </div>
                            <div class="results-details-item">
                                <div class="results-details-item-name">Additional Remarks:</div>
                                <textarea class="remarks" type="text" name="remarks" id="" placeholder="Type additional remarks here"></textarea>
                                </div>
                            <div class="upload-submit">
                                <button class="upload-submit-button" type="submit">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </form>
    </div>
</div>

{% endblock %}